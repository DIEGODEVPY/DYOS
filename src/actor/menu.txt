Menu.SetActiveItem($PANEL, 0)
Text.PrintHelp('M000009')
:MenuDelActor
if $numActores == 0
then                                                                                                                                      
    Menu.SetColumn($PANEL, 0, 'VACTOR','ZUIZCRE',none,none,none,none,none,none,none,none,none,none,none)  
    FrenarRetorno()
    FrenarSeleccion()
    repeat
        wait 0
        if EntrarAlMenu()
        then
            if $Seleccion == 0
            then
                CrearActor()
                FrenarSeleccion()
                jump @MenuDelActor
            end
        end
    until SalirDelMenu()
    Menu.SetActiveItem($PANEL, 1)
else
    if $numActores > 1
    then 0@s = 'M00000D'
    else 0@s = 'DUMMY'
    end
    Menu.SetColumn($PANEL, 0, 'VACTOR','ZUIZCRE','ZUIZEDI',0@s,none,none,none,none,none,none,none,none,none)   
    FrenarRetorno()
    FrenarSeleccion()
    repeat
        wait 0
        if EntrarAlMenu()
        then
            if $Seleccion == 0 // Create
            then
                CrearActor() 
                jump @MenuDelActor
            end

            if $Seleccion == 1 // Edit
            then
                Menu.SetActiveItem($PANEL, 0)
                :MenuDeEdicionDelActor

                if Actor.Defined($Actor($indActor,101i))
                then
                    if Blip.Defined($ResaltadorDeEntidad)
                    then wait 0
                    else $ResaltadorDeEntidad = Blip.CreateAboveActor($Actor($indActor,101i))
                    end
                end

                if $indActor == $numActores
                then
                    0@s = 'ZUIZDES'
                else
                    Text.PrintHelp('M00009Z')
                    0@s = none
                end
                
                Menu.SetColumn($PANEL, 0, 'VACTOR','ZUIZSOL','VANIMAT','VWEAPON','VHEALTH','VARMOUR','M00007Q','VFIGHT','VWALK','M00008Y','M00000E',0@s,none,none)
                FrenarRetorno()
                FrenarSeleccion()  
                repeat
                    wait 0
                    if EntrarAlMenu()
                    then  
                        if $Seleccion == 0 // Solid
                        then
                            if $colActor($indActor,101i) == false
                            then            
                                Text.PrintHelp('ZBZENAB')
                                $colActor($indActor,101i) = true
                                Actor.SetKeepPosition($Actor($indActor,101i), false) 
                                Actor.SetImmunities($Actor($indActor,101i), false, false, false, false, false)
                                Actor.SetCollisionDetection($Actor($indActor,101i), true)
                            else   
                                Text.PrintHelp('ZBZDISA')
                                $colActor($indActor,101i) = false 
                                Actor.SetKeepPosition($Actor($indActor,101i), true) 
                                Actor.SetImmunities($Actor($indActor,101i), true, true, true, true, true)
                                Actor.SetCollisionDetection($Actor($indActor,101i), false)
                            end
                        end 

                        if $Seleccion == 1 // Animation
                        then
                            Menu.SetActiveItem($PANEL, 0)
                            :MenuDeAnimacionesDelActor
                            Menu.SetColumn($PANEL,0,'VANIMAT','M00002O','ANS1000','ANS2000','ANS3000','M00000S','M00001D','M000020','M00002L','M00008W',none,none,none)
                            FrenarRetorno()
                            FrenarSeleccion() 
                            repeat
                                wait 0
                                if EntrarAlMenu()
                                then
                                    if $Seleccion == 0
                                    then {$I ./anims/chat.txt}
                                        Menu.SetActiveItem($PANEL, 0)
                                    end
                                    if $Seleccion == 1
                                    then {$I ./anims/beach.txt}
                                        Menu.SetActiveItem($PANEL, 1)
                                    end   
                                    if $Seleccion == 2
                                    then {$I ./anims/coffe.txt}
                                        Menu.SetActiveItem($PANEL, 2)
                                    end
                                    if $Seleccion == 3
                                    then {$I ./anims/dance.txt}
                                        Menu.SetActiveItem($PANEL, 3)
                                    end
                                    if $Seleccion == 4
                                    then {$I ./anims/smoking.txt}
                                        Menu.SetActiveItem($PANEL, 4)
                                    end  
                                    if $Seleccion == 5
                                    then {$I ./anims/masochist.txt}
                                        Menu.SetActiveItem($PANEL, 5)
                                    end
                                    if $Seleccion == 6
                                    then {$I ./anims/stripper.txt}
                                        Menu.SetActiveItem($PANEL, 6)
                                    end
                                    if $Seleccion == 7
                                    then {$I ./anims/spray.txt}
                                        Menu.SetActiveItem($PANEL, 7)
                                    end
                                    if $Seleccion == 8 // Remove anim
                                    then
                                        Actor.SetClearTasks($Actor($indActor,101i))
                                        MensajeDeAplicado()
                                    end
                                    jump @MenuDeAnimacionesDelActor
                                end
                            until SalirDelMenu()  
                            Menu.SetActiveItem($PANEL, 1)
                            jump @MenuDeEdicionDelActor
                        end

                        if $Seleccion == 2 // Weapon
                        then {$I giveWeapon.txt}
                        end

                        if $Seleccion == 3 // Health
                        then
                            Menu.SetActiveItem($PANEL, 0)
                            Menu.SetColumn($PANEL,0,'M0000AJ','M0000AA','M0000AB','M0000AC','M0000AD',none,none,none,none,none,none,none,none)
                            FrenarSeleccion()
                            repeat
                                wait 0
                                if EntrarAlMenu()
                                then 
                                    if $Seleccion == 0
                                    then Actor.SetHealth($Actor($indActor,101i), 25)
                                    end
                                    if $Seleccion == 1
                                    then Actor.SetHealth($Actor($indActor,101i), 50)
                                    end
                                    if $Seleccion == 2
                                    then Actor.SetHealth($Actor($indActor,101i), 75)
                                    end
                                    if $Seleccion == 3
                                    then Actor.SetHealth($Actor($indActor,101i), 100)
                                    end   
                                    MensajeDeAplicado() 
                                    FrenarSeleccion()
                                end
                            until SalirDelMenu()
                            Menu.SetActiveItem($PANEL, 4)
                            jump @MenuDeEdicionDelActor
                        end

                        if $Seleccion == 4 // Armour
                        then
                            Menu.SetActiveItem($PANEL, 0)
                            Menu.SetColumn($PANEL,0,'M0000Ak','M0000AA','M0000AB','M0000AC','M0000AD',none,none,none,none,none,none,none,none)
                            FrenarSeleccion()
                            repeat
                                wait 0
                                if EntrarAlMenu()
                                then 
                                    if $Seleccion == 0
                                    then Actor.SetAddArmour($Actor($indActor,101i), -100) 
                                        Actor.SetAddArmour($Actor($indActor,101i), 25)
                                    end
                                    if $Seleccion == 1
                                    then Actor.SetAddArmour($Actor($indActor,101i), -100) 
                                        Actor.SetAddArmour($Actor($indActor,101i), 50)
                                    end
                                    if $Seleccion == 2
                                    then Actor.SetAddArmour($Actor($indActor,101i), -100) 
                                        Actor.SetAddArmour($Actor($indActor,101i), 75)
                                    end
                                    if $Seleccion == 3
                                    then Actor.SetAddArmour($Actor($indActor,101i), -100) 
                                        Actor.SetAddArmour($Actor($indActor,101i), 100)
                                    end
                                    MensajeDeAplicado()   
                                    FrenarSeleccion()
                                end
                            until SalirDelMenu()  
                            Menu.SetActiveItem($PANEL, 5)
                            jump @MenuDeEdicionDelActor
                        end

                        if $Seleccion == 5 // Visibility
                        then
                            if $visActor($indActor,101i) == true
                            then
                                Text.PrintHelp('ZBZDISA')
                                $visActor($indActor,101i) = false
                                Actor.SetVisibility($Actor($indActor,101i), false)
                            else
                                Text.PrintHelp('ZBZENAB')
                                $visActor($indActor,101i) = true
                                Actor.SetVisibility($Actor($indActor,101i), true)
                            end
                        end

                        if $Seleccion == 6 // Fight
                        then
                            Menu.SetActiveItem($PANEL, 0)
                            Menu.SetColumn($PANEL, 0, 'VFIGHT','ZFIGH00','ZFIGH01','ZFIGH02','ZFIGH03','ZFIGH04','ZFIGH05','ZFIGH06','ZFIGH07','ZFIGH08','ZFIGH09','ZFIGH10','ZFIGH11')
                            FrenarSeleccion()
                            repeat
                                wait 0
                                if EntrarAlMenu()
                                then 
                                    if $Seleccion == 0
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.Default, 6)
                                    end 
                                    if $Seleccion == 1
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.Boxeo, 6)
                                    end 
                                    if $Seleccion == 2
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.KungFu, 6)
                                    end 
                                    if $Seleccion == 3
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.KickBoxing, 6)
                                    end 
                                    if $Seleccion == 4
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.Bat, 6)
                                    end 
                                    if $Seleccion == 5
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.Knife, 6)
                                    end 
                                    if $Seleccion == 6
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.GolfClub, 6)
                                    end 
                                    if $Seleccion == 7
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.Katana, 6)
                                    end 
                                    if $Seleccion == 8
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.Chainsaw, 6)
                                    end 
                                    if $Seleccion == 9
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.Dildo, 6)
                                    end               
                                    if $Seleccion == 10
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.YesCombos, 6)
                                    end               
                                    if $Seleccion == 11
                                    then Actor.SetFightStyle($Actor($indActor,101i), Fight.Elbows, 6)
                                    end
                                    MensajeDeAplicado() 
                                    FrenarSeleccion()
                                end
                            until SalirDelMenu()  
                            Menu.SetActiveItem($PANEL, 6)
                            jump @MenuDeEdicionDelActor
                        end

                        if $Seleccion == 7 // Walk
                        then
                            Menu.SetActiveItem($PANEL, 0)
                            Menu.SetColumn($PANEL, 0, 'VWALK', 'ZWALK00','ZWALK01','ZWALK02','ZWALK03','ZWALK04','ZWALK05','ZWALK06','ZWALK07','ZWALK08','ZWALK09','ZWALK10','ZWALK11')
                            FrenarSeleccion()
                            repeat
                                wait 0
                                if EntrarAlMenu()
                                then
                                    if $Seleccion == 0
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'MAN')
                                    end
                                    if $Seleccion == 1
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'WOMAN') 
                                    end
                                    if $Seleccion == 2
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'OLDMAN')
                                    end
                                    if $Seleccion == 3
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'OLDWOMAN')
                                    end 
                                    if $Seleccion == 4
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'OLDFATMAN')
                                    end 
                                    if $Seleccion == 5
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'OLDFATWOMAN')
                                    end 
                                    if $Seleccion == 6
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'FATMAN')
                                    end  
                                    if $Seleccion == 7
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'FATWOMAN')
                                    end
                                    if $Seleccion == 8
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'JOGGER')
                                    end
                                    if $Seleccion == 9
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'JOGWOMAN')
                                    end
                                    if $Seleccion == 10
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'GANG1')
                                    end 
                                    if $Seleccion == 11
                                    then Actor.SetWalkStyle($Actor($indActor,101i), 'GANG2')
                                    end
                                    MensajeDeAplicado()
                                    FrenarSeleccion()
                                end
                            until SalirDelMenu()
                            Menu.SetActiveItem($PANEL, 7)
                            jump @MenuDeEdicionDelActor
                        end

                        if $Seleccion == 8 // Task
                        then
                            Text.PrintHelp('M00009X')
                            Menu.SetColumn($PANEL, 0, 'M00008Y','M00008X','M00008T','M00008V','M00008Z','M000090','M000091','M000092','M000093','M000094',none,none,none)
                            FrenarRetorno()
                            FrenarSeleccion()
                            repeat
                                wait 0
                                if EntrarAlMenu()
                                then
                                    if $Seleccion == 0 // Clear task
                                    then Actor.SetClearTasks($Actor($indActor,101i))
                                    end

                                    if $Seleccion == 1 // Follow player
                                    then Task.FollowFootsteps($Actor($indActor,101i), _Player)
                                    end

                                    if $Seleccion == 2 // Follow actor
                                    then
                                        if $numActores > 1
                                        then
                                            int 0@ = $indActor
                                            0@--

                                            if 0@ == 0
                                            then 0@ = $numActores
                                            end

                                            Task.FollowFootsteps($Actor($indActor,101i), $Actor(0@,101i))
                                        else
                                            Text.PrintHelp('M00009Y')
                                        end
                                    end

                                    if $Seleccion == 3 // kill player
                                    then Task.KillActorOnFoot($Actor($indActor,101i), _Player)
                                    end

                                    if $Seleccion == 4 // kill actor
                                    then
                                        if $numActores > 1
                                        then
                                            int 0@ = $indActor
                                            0@--

                                            if 0@ == 0
                                            then 0@ = $numActores
                                            end

                                            Task.KillActorOnFoot($Actor($indActor,101i), $Actor(0@,101i))
                                        else
                                            Text.PrintHelp('M00009Y')
                                        end
                                    end

                                    if $Seleccion == 5 // Aim gun to player
                                    then Task.AimGunAtActor($Actor($indActor,101i), _Player, -1)
                                    end

                                    if $Seleccion == 6 // Aim gun to actor
                                    then
                                        if $numActores > 1
                                        then
                                            int 0@ = $indActor
                                            0@--

                                            if 0@ == 0
                                            then 0@ = $numActores
                                            end

                                            Task.AimGunAtActor($Actor($indActor,101i), $Actor(0@,101i), -1)
                                        else
                                            Text.PrintHelp('M00009Y')
                                        end
                                    end

                                    if $Seleccion == 7 // Look to player
                                    then Task.LookAtActor($Actor($indActor,101i), _Player, -1)
                                    end

                                    if $Seleccion == 8 // Look to actor
                                    then
                                        if $numActores > 1
                                        then
                                            int 0@ = $indActor
                                            0@--

                                            if 0@ == 0
                                            then 0@ = $numActores
                                            end

                                            Task.LookAtActor($Actor($indActor,101i), $Actor(0@,101i), -1)
                                        else
                                            Text.PrintHelp('M00009Y')
                                        end
                                    end

                                    MensajeDeAplicado()
                                    FrenarSeleccion()
                                end
                            until SalirDelMenu()
                            Menu.SetActiveItem($PANEL, 8)
                            jump @MenuDeEdicionDelActor
                        end

                        if $Seleccion == 9 // Location
                        then  
                            Text.ClearHelp()
                            EsconderMenu()

                            s = 0       
                            FrenarSeleccion()
                            repeat
                                wait 0   
                                Txd.DrawRect(60.0, 60.0, 250.0, 140.0, 0x0,0x0,0x0,0xCC)
                                                      
                                Text.SetScale(0.4, 1.1)
                                Text.Display(10.0, 20.0, 'M00001C')
                                    
                                if s == 0
                                then                                      
                                    Actor.GetPositionAndOffset(x, y, z, $Actor($indActor,101i), 0.0, 0.0, -1.0)
                                    
                                    0@ = Math.FloatToInt_LsG(x)      
                                    Text.DisplayWithNumber(10.0, 80.0, 'M000011', 0@)
                                    0@ = Math.FloatToInt_LsG(y)    
                                    Text.DisplayWithNumber(10.0, 90.0, 'M000012', 0@)
                                    0@ = Math.FloatToInt_LsG(z)
                                    Text.DisplayWithNumber(10.0, 100.0, 'M000013', 0@)
                                
                                    ControlDeDesplazamiento3D()
                                          
                                    Actor.SetPosition($Actor($indActor,101i), x, y, z)
                                    if Selecionas()
                                    then
                                        s = 1
                                        while Selecionas()
                                            wait 0
                                        end 
                                    end
                                end
                                if s == 1
                                then                                       
                                    a = Actor.GetAngle($Actor($indActor,101i))
                                    
                                    0@ = Math.FloatToInt_LsG(a)      
                                    Text.DisplayWithNumber(10.0, 80.0, 'M000011', 0@)
                                              
                                    
                                    if ParaDerecha() 
                                    then a -= 1.0
                                    end
                                    
                                    if ParaIzquierda()
                                    then a += 1.0
                                    end 
                                          
                                    Actor.SetAngle($Actor($indActor,101i), a) 
                                    if Selecionas()
                                    then
                                        s = 0
                                        while Selecionas()
                                            wait 0
                                        end 
                                    end
                                end
                            until SalirDelMenu()
                            AparecerMenu()
                            Menu.SetActiveItem($PANEL, 9)
                            Camera.Restore()
                            jump @MenuDeEdicionDelActor
                        end 

                        if $Seleccion == 10 // Destroy
                        then 
                            $numActores--
                            Actor.Remove($Actor($indActor,101i))
                            $indActor--
                            if $numActores == 0
                            then
                                Text.PrintHelp('M00000A') 
                                Menu.SetActiveItem($PANEL, 0)
                                jump @MenuDelActor
                            else 
                                Menu.SetActiveItem($PANEL, 10)
                                MensajeDeAplicado()
                                jump @MenuDeEdicionDelActor
                            end           
                        end
                        FrenarSeleccion()
                    end
                until SalirDelMenu() 
                if Actor.Defined($Actor($indActor,101i))
                then Blip.Remove($ResaltadorDeEntidad)
                end
                Menu.SetActiveItem($PANEL, 1)
                jump @MenuDelActor
            end 

            if $Seleccion == 2 // Select
            then
                EsconderMenu()
                FrenarSeleccion()
                repeat
                    wait 0
                    Text.PrintWith2NumbersNow('ZCLC',$indActor,$numActores,150,0)

                    if Blip.Defined($ResaltadorDeEntidad)
                    then
                        wait 0
                    else 
                        $ResaltadorDeEntidad = Blip.CreateAboveActor($Actor($indActor,101i))
                        while ParaIzquierda() 
                            wait 0
                        end
                        while ParaDerecha() 
                            wait 0
                        end
                    end

                    if $numActores > 1
                    then
                        if ParaIzquierda()
                        then
                            $indActor--
                            if $indActor < 1
                            then $indActor = $numActores 
                            end
                            Blip.Remove($ResaltadorDeEntidad)
                        end
                        if ParaDerecha()
                        then
                            $indActor++
                            if $indActor > $numActores
                            then $indActor = 1
                            end
                            Blip.Remove($ResaltadorDeEntidad)
                        end
                    end

                    if Selecionas()
                    then
                        AparecerMenu()
                        Menu.SetActiveItem($PANEL, 0)
                        jump @MenuDeEdicionDelActor
                    end
                until SalirDelMenu()
                Blip.Remove($ResaltadorDeEntidad)
                AparecerMenu()
                Menu.SetActiveItem($PANEL, 2)
                jump @MenuDelActor
            end
            FrenarSeleccion() 
        end
    until SalirDelMenu()
    Menu.SetActiveItem($PANEL, 1)
end
jump @MenuPrincipal  